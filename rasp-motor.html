<link rel="import" href="../polymer/polymer.html">

<dom-module id="rasp-motor">
    <script>
        class RaspMotor {
            beforeRegister() {
                this.is = 'rasp-motor';
                this.properties = {
                    pin: {
                        observer: 'init'
                    },
                    on: {
                        type: Boolean,
                        observer: 'onChanged'
                    },
                    forward: {
                        type: Boolean,
                        observer: 'forwardChanged'
                    },
                    reverse: {
                        type: Boolean,
                        observer: 'reverseChanged'
                    }
                };

                this.jFive = require('johnny-five');
                const Raspio = require('raspi-io');
                const board = new this.jFive.Board({
                    io: new Raspio(),
                    repl: false
                });
            }

            init() {
                this.motor = new this.jFive.Motor(this.pin);
            }

            onChanged() {
                this.on ? this.motor.start(255) : this.motor.stop();
            }

            forwardChanged() {
                this.forward ? this.motor.forward(255) : this.motor.reverse(255);
            }

            reverseChanged() {
                this.reverse ? this.motor.reverse(255) : this.motor.forward(255);
            }
        }

        Polymer(RaspMotor);
    </script>
</dom-module>
